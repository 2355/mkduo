# MKDuo 初回スプリント詳細タスク

## スプリント目標

初回スプリント（2週間）の目標: **プロジェクト基盤の構築と認証システムの実装**

このスプリントでは、アプリケーションの基本的な開発環境セットアップとユーザー認証の実装に集中します。これにより、その後のスプリントでコアビジネスロジックの実装に迅速に移行できるようにします。

## 詳細タスク一覧

### 1. プロジェクト初期設定

#### 1.1 リポジトリと開発環境セットアップ
- [ ] GitHub リポジトリの作成と初期設定
  - README.md, .gitignore, CONTRIBUTING.md の作成
  - ブランチ保護ルールの設定
  - Issue/PR テンプレートの設定
- [ ] Next.js プロジェクトの初期化
  ```bash
  npx create-next-app@latest mkduo --typescript --tailwind --eslint
  ```
- [ ] 追加パッケージのインストール
  ```bash
  npm install prisma @prisma/client next-auth zod react-hook-form framer-motion
  npm install -D @types/node @types/react @types/react-dom typescript
  ```
- [ ] VS Code設定ファイルの作成（推奨拡張機能など）

#### 1.2 コード品質ツール設定
- [ ] ESLint の詳細設定
  - AirBnB スタイルガイドの追加
  - TypeScript 固有のルール追加
- [ ] Prettier の設定
  - .prettierrc ファイルの作成
  - pre-commit フックの設定
- [ ] husky と lint-staged のセットアップ
  - コミット前の自動リント/フォーマット設定

#### 1.3 プロジェクト構造の整備
- [ ] ディレクトリ構造の設計と作成
  ```
  /src
    /app - Next.js App Router
    /components - 再利用可能なUIコンポーネント
    /lib - ユーティリティ関数とヘルパー
    /prisma - Prismaスキーマとクライアント
    /hooks - カスタムReactフック
    /types - TypeScript型定義
    /styles - グローバルスタイル
  ```
- [ ] 共通型定義ファイルの作成
- [ ] 環境変数設定 (.env, .env.example)
- [ ] 基本的なNext.jsの設定 (next.config.js)

### 2. バックエンドインフラ構築

#### 2.1 データベース設定
- [ ] Supabase プロジェクトの作成
- [ ] データベース接続情報の設定
- [ ] Prisma 初期化
  ```bash
  npx prisma init
  ```
- [ ] 基本的なPrismaスキーマ定義（User）
- [ ] 初期マイグレーション実行
  ```bash
  npx prisma migrate dev --name init
  ```

#### 2.2 Prismaクライアント設定
- [ ] シングルトンPrismaクライアントの作成 (src/lib/prisma.ts)
- [ ] Prismaスキーマの基本型定義
- [ ] 初期シードデータの作成

#### 2.3 CI/CD設定
- [ ] GitHub Actions ワークフローの設定
  - リント/ビルドチェック
  - テスト実行
- [ ] Vercel プロジェクトの作成と連携
- [ ] デプロイプレビュー設定
- [ ] 環境変数の設定（本番/開発）

### 3. デザインシステム準備

#### 3.1 デザイン基盤
- [ ] カラーパレットの定義 (Tailwind設定)
- [ ] タイポグラフィシステムの設定
- [ ] 共通スペーシングとグリッドの設定
- [ ] ダークモード対応の準備

#### 3.2 基本UIコンポーネント
- [ ] ボタンコンポーネント (Button.tsx)
  - バリエーション: プライマリ、セカンダリ、アウトライン
  - サイズ: S, M, L
  - 状態: 通常、ホバー、アクティブ、無効
- [ ] 入力フィールドコンポーネント (Input.tsx)
  - バリエーション: テキスト、パスワード、数値
  - 状態: 通常、フォーカス、エラー、無効
- [ ] カードコンポーネント (Card.tsx)
- [ ] アラート/通知コンポーネント (Alert.tsx)
- [ ] ロゴとアイコン設定

#### 3.3 レスポンシブ設計
- [ ] ブレークポイント定義
- [ ] モバイルファーストアプローチの確立
- [ ] レスポンシブユーティリティの作成
- [ ] テストビューポートの設定

### 4. ユーザー認証システム

#### 4.1 NextAuth.js セットアップ
- [ ] NextAuth.js の基本設定
  - セッション設定
  - JWT設定
  - コールバックURL設定
- [ ] Prisma アダプター設定
- [ ] 認証プロバイダー設定
  - GitHub OAuth
  - (オプション) Google, Twitter連携

#### 4.2 認証API実装
- [ ] API Routes の作成
  - GitHub OAuth連携
  - ログアウト
- [ ] GitHub OAuth設定
- [ ] エラーハンドリング
- [ ] CSRF保護

### 5. 認証UI実装

#### 5.1 ログインページ
- [ ] GitHub ログインボタン作成
- [ ] エラー表示
- [ ] ログイン状態のリダイレクト処理

#### 5.2 追加のOAuth設定（オプション）
- [ ] Google OAuth設定（オプション）
- [ ] Twitter OAuth設定（オプション）

#### 5.3 ユーザープロフィール処理
- [ ] GitHub から取得したユーザー情報の処理
- [ ] 初回ログイン時のプロフィール設定
- [ ] 既存ユーザーとの連携処理

### 6. テストとドキュメント

#### 6.1 単体テスト
- [ ] 認証APIのテスト
- [ ] コンポーネントテスト
- [ ] ユーティリティ関数テスト

#### 6.2 統合テスト
- [ ] 認証フローのE2Eテスト
- [ ] データベース連携テスト

#### 6.3 ドキュメント
- [ ] API仕様書作成
- [ ] コンポーネントスタイルガイド作成
- [ ] 環境設定ドキュメント
- [ ] コントリビューションガイド更新

### 7. 初期ページ実装

#### 7.1 ランディングページ
- [ ] ヒーローセクション
- [ ] 機能紹介セクション
- [ ] CTAセクション
- [ ] フッター

#### 7.2 ダッシュボード骨格
- [ ] ダッシュボードレイアウト
- [ ] ナビゲーションメニュー
- [ ] プレースホルダーコンテンツ
- [ ] ログアウト機能

#### 7.3 その他ページ骨格
- [ ] プロフィールページ基本構造
- [ ] 設定ページ基本構造
- [ ] 404/エラーページ

## 優先順位とタスク割り当て

### 最優先タスク（Week 1の前半）
1. リポジトリと開発環境セットアップ
2. プロジェクト構造の整備
3. データベース設定
4. NextAuth.js セットアップ

### 高優先度タスク（Week 1の後半）
1. 基本UIコンポーネント
2. 認証API実装
3. ログインページ
4. サインアップページ

### 中優先度タスク（Week 2の前半）
1. 認証状態管理
2. 共通認証コンポーネント
3. ランディングページ

### 標準優先度タスク（Week 2の後半）
1. CI/CD設定
2. デザインシステム準備
3. ダッシュボード骨格
4. テストとドキュメント

## デイリースタンドアップ項目
1. 昨日完了したタスク
2. 今日取り組むタスク
3. 障害やブロッカー
4. 支援が必要な点

## スプリントレトロスペクティブ項目
1. うまくいったこと
2. 改善すべきこと
3. 次のスプリントへの教訓
4. チームの協力体制
